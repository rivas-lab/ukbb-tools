#!/bin/bash
set -beEuo pipefail

log_d=logs

if [ ! -d ${log_d} ] ; then mkdir -p ${log_d} ; fi

ml load resbatch

# sbatch -p mrivas,normal,owners \
sbatch -p mrivas --qos=high_p \
--time=2-0:0:00 --mem=8000 --nodes=1 --cores=1 --job-name=vep --output=${log_d}/vep.%A_%a.out --error=${log_d}/vep.%A_%a.err \
--array=4,5,9,11,13,14,15,19,34,40,41,43,45,46,47,53,54,55,57,63,65,69,71,73,74,79,82,84,100,101,102,105,106,107,108,109,110,111,116,118,119,120,122,123,125,131,135,136,137,142,144,148,151,171,172,175,176,178,179,180,182,186,189,192,194,196,197,200,204,219,221,223,224,226,227,229,232,233,235,236,238,239,240,243,245,248,250,251,252,253,254,255,257,259,260,261,263,267,268,273,274,275,276,277,283,290,293,300,302,305,306,314,317,318,322,343,345,347,348,350,357,364,366,367,376,383,384,387,416,417,422,423,424,426,428,431,434,435,436,439,441,443,451,459,463,466,469,470,472,474,475,481,482,485,488,494,497,498,501,503,506,515,516,522,524,525,527,534,554,555,559,563,571,573,575,576,584,588,589,592,593,594,595,596,597,604,605,606,607,610,617,629,630,633,641,646,652,655,656,657,658,659,661,663,674,679,682,687,688,690,691,697,700,702,705,706,707,708,709,710,711,712,714,715,744,749,755,756,758,759,760,766,768,770,773,775,779,780,781,785,787,790,794,795,799,800,817,820,821,822,825,828,830,831,834,835,842,843,845,858,859,860,863,864,865,868,871,873,874,875,883,884,886,887,888,890,891,892,893,894,896,897,898,899,900,912,914,915,916,917,922,923,925,926,947,948,950,951,952,953,957,958,959,960,965,967,968,973,974,976,981,991 \
${parallel_sbatch_sh} 2_run_vep.sh ${parallel_idx} 1

exit 0
/oak/stanford/groups/mrivas/ukbb24983/cnv/pgen/cnv.pvar
# 275181 lines, 275180 variants

998 batches
276 variants each
